{"version":3,"file":"modal-alert.esm.min.js","sources":["../src/js/defaults.js","../src/modal-alert.js"],"sourcesContent":["export const defaults = {\n\n  // settings to be applied to all dialog types\n  // can be reassigned on single types\n  globals: {\n    onOpen: null,\n    onClose: null\n  },\n\n  success: {\n    title: 'Operazione completata',\n    mes: null,\n    ok_btn_text: 'OK',\n    heading_class: null,\n    text_class: null,\n    ok_btn_class: 'btn btn-success',\n    timer: 4000, // ms\n    color: '#297e2d'\n  },\n  error: {\n    title: 'Si Ã¨ verificato un errore',\n    mes: null,\n    ok_btn_text: 'OK',\n    heading_class: null,\n    text_class: null,\n    ok_btn_class: 'btn btn-error',\n    timer: null,\n    color: '#c00'\n  },\n  warning: {\n    title: 'Attenzione!',\n    mes: null,\n    ok_btn_text: 'OK',\n    heading_class: null,\n    text_class: null,\n    ok_btn_class: 'btn btn-warning',\n    timer: null,\n    color: '#c00'\n  },\n  info: {\n    title: null,\n    mes: null,\n    ok_btn_text: 'OK',\n    heading_class: null,\n    text_class: null,\n    ok_btn_class: 'btn btn-info',\n    timer: null,\n    color: '#0288D1'\n  },\n  confirm: {\n    title: 'Confermi?',\n    mes: null,\n    ok_btn_text: 'OK',\n    cancel_btn_text: 'Annulla',\n    cancel_focus: true, // false to give focus to the ok button\n    heading_class: null,\n    text_class: null,\n    ok_btn_class: 'btn btn-confirm',\n    cancel_btn_class: 'btn btn-outline-confirm',\n    callback: null,\n    timer: null,\n    color: '#8720c5'\n  }\n\n};\n","import confirm_mark from './svg/confirm.svg';\nimport info_mark from './svg/info.svg';\nimport error_mark from './svg/error.svg';\nimport success_mark from './svg/success.svg';\nimport warning_mark from './svg/warning.svg';\n\nimport {defaults} from './js/defaults';\n\n// https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement\n\nconst marks = {\n  confirm: confirm_mark,\n  info: info_mark,\n  error: error_mark,\n  success: success_mark,\n  warning: warning_mark\n};\n\nlet parsed_defaults = {};\n\nexport function setDefaults(custom_defaults = {}) {\n  parsed_defaults = {...defaults, ...custom_defaults};\n}\n\nexport default function (params) {\n\n  try {\n\n    // garbage collection\n    let dialog = document.querySelector('.modal-alert');\n    if(dialog) {\n      dialog.remove();\n    }\n\n\n    params = {...(parsed_defaults.globals?? defaults.globals), ...(parsed_defaults[params.type]?? defaults[params.type]), ...params};\n\n    if(!params.type || Object.keys(defaults).filter(item => item !== 'global').indexOf(params.type) === -1) {\n      throw 'Missing or incorrect `type` parameter';\n    }\n\n    if(params.type === 'confirm' && params.callback && typeof params.callback !== 'function') {\n      throw 'Incorrect `callback` parameter';\n    }\n    if(params.onOpen && typeof params.onOpen !== 'function') {\n      throw 'Incorrect `onOpen` parameter';\n    }\n    if(params.onClose && typeof params.onClose !== 'function') {\n      throw 'Incorrect `onClose` parameter';\n    }\n\n\n    if(!params.title) {\n      throw '`title` parameter not present';\n    }\n\n    document.body.insertAdjacentHTML('beforeend',\n      `<dialog class=\"modal-alert\" style='--malert-color: ${params.color}'>\n        <div class=\"malert-inner\">\n          <div class=\"malert-mark\">\n            ${marks[params.type]}\n          </div>\n          <div class=\"malert-body\">\n            <div class=\"malert-heading ${params.heading_class?? ''}\">${params.title}</div>\n            <div class=\"malert-text ${params.text_class?? ''}\">${params.mes?? ''}</div>\n            <div class=\"malert-btns\">\n              <button type=\"button\" class=\"malert-ok ${params.ok_btn_class}\">\n                ${params.ok_btn_text}\n              </button>\n              ${params.type === 'confirm'?\n                `<button type=\"button\" class=\"malert-cancel ${params.cancel_btn_class}\">\n                  ${params.cancel_btn_text}\n                </button>`\n              : ''}\n            </div>\n          </div>\n        </div>\n      </dialog>`\n    );\n\n    dialog = document.querySelector('.modal-alert');\n\n    dialog.showModal();\n\n    // btn focus\n    const ok_btn = dialog.querySelector('.malert-ok'),\n      cancel_btn = dialog.querySelector('.malert-cancel');\n\n    if(cancel_btn && params.cancel_focus) {\n      cancel_btn.focus();\n    } else {\n      ok_btn.focus();\n    }\n\n    if(params.onOpen && typeof params.onOpen === 'function') {\n      params.onOpen();\n    }\n\n    let timeoutID;\n    const dialogDismiss = () => {\n      dialog.remove();\n\n      if(params.onClose && typeof params.onClose === 'function') {\n        params.onClose();\n      }\n\n      if(timeoutID) {\n        window.clearTimeout(timeoutID);\n      }\n    };\n\n    if( params.timer && params.type !== 'confirm') {\n      timeoutID = window.setTimeout( function() {\n        dialogDismiss();\n      }, params.timer);\n    }\n\n    dialog.addEventListener('close', () => {\n      dialogDismiss();\n    }, false);\n\n    dialog.addEventListener('cancel', () => {\n      dialogDismiss();\n    }, false);\n\n    [ok_btn, cancel_btn].forEach(btn => {\n\n      btn.addEventListener('click', () => {\n\n        dialogDismiss();\n\n        if(params.type === 'confirm' && params.callback && typeof params.callback === 'function') {\n          params.callback(btn.classList.contains('malert-ok'));\n        }\n\n      }, false);\n\n    });\n\n\n  } catch(e) {\n    console.error( e ); // eslint-disable-line\n  }\n\n}\n"],"names":["defaults","globals","onOpen","onClose","success","title","mes","ok_btn_text","heading_class","text_class","ok_btn_class","timer","color","error","warning","info","confirm","cancel_btn_text","cancel_focus","cancel_btn_class","callback","marks","parsed_defaults","setDefaults","custom_defaults","modalAlert","params","dialog","document","querySelector","remove","type","Object","keys","filter","item","indexOf","body","insertAdjacentHTML","showModal","ok_btn","cancel_btn","timeoutID","focus","dialogDismiss","window","clearTimeout","setTimeout","addEventListener","forEach","btn","classList","contains","e","console"],"mappings":"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"}